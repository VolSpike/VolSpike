@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        /* ==================== Brand Colors (Light Mode) ==================== */
        /* Brand Green (Lightning) - Full Scale */
        --brand-50: 152 100% 96%;
        --brand-100: 149 91% 91%;
        --brand-200: 150 84% 81%;
        --brand-300: 150 80% 69%;
        --brand-400: 150 77% 56%;
        --brand-500: 150 100% 42%; /* Primary: #00D563 */
        --brand-600: 150 100% 35%;
        --brand-700: 150 90% 29%;
        --brand-800: 151 80% 23%;
        --brand-900: 152 72% 19%;
        --brand-950: 155 85% 10%;
        --brand-glow: 150 100% 42% / 0.18;

        /* Secondary Blue/Cyan (Pro/Highlights) */
        --secondary-50: 200 100% 97%;
        --secondary-100: 199 100% 93%;
        --secondary-200: 200 97% 85%;
        --secondary-300: 199 96% 74%;
        --secondary-400: 199 94% 61%;
        --secondary-500: 199 89% 48%; /* #19B5FF */
        --secondary-600: 199 100% 46%; /* #0EA5E9 */
        --secondary-700: 200 98% 39%;
        --secondary-800: 200 84% 33%;
        --secondary-900: 201 77% 28%;
        --secondary-950: 202 87% 19%;

        /* Tertiary Purple (Elite) */
        --tertiary-50: 250 100% 97%;
        --tertiary-100: 251 91% 95%;
        --tertiary-200: 251 95% 92%;
        --tertiary-300: 252 95% 85%;
        --tertiary-400: 252 91% 76%;
        --tertiary-500: 252 83% 67%; /* #8B5CF6 */
        --tertiary-600: 252 71% 60%;
        --tertiary-700: 252 61% 51%;
        --tertiary-800: 253 56% 41%;
        --tertiary-900: 253 51% 35%;
        --tertiary-950: 254 60% 23%;

        /* Warning/Alert */
        --warning-50: 33 100% 96%;
        --warning-100: 34 100% 92%;
        --warning-200: 32 98% 83%;
        --warning-300: 31 97% 72%;
        --warning-400: 27 96% 61%;
        --warning-500: 25 95% 71%; /* #FDBA74 */
        --warning-600: 21 90% 48%;
        --warning-700: 17 88% 40%;
        --warning-800: 15 79% 34%;
        --warning-900: 15 75% 28%;
        --warning-950: 13 81% 15%;

        /* Danger/Negative */
        --danger-50: 0 86% 97%;
        --danger-100: 0 93% 94%;
        --danger-200: 0 96% 89%;
        --danger-300: 0 94% 82%;
        --danger-400: 0 91% 71%;
        --danger-500: 0 84% 60%; /* #EF4444 */
        --danger-600: 0 72% 51%;
        --danger-700: 0 74% 42%;
        --danger-800: 0 70% 35%;
        --danger-900: 0 63% 31%;
        --danger-950: 0 75% 16%;

        /* Background Layers (Light) - Subtle cool tints */
        --bg-base: 210 40% 97%; /* Soft blue-gray tint instead of stark white */
        --bg-surface: 200 30% 99%; /* Subtle cyan tint for cards */
        --bg-elevated: 195 35% 98%; /* Slightly more saturated for elevation */
        --bg-hover: 205 35% 94%; /* Cool hover state */

        /* Shadcn compatible tokens (mapped to new system) */
        --background: var(--bg-base);
        --foreground: 222 47% 11%;
        --card: var(--bg-surface);
        --card-foreground: 222 47% 11%;
        --popover: var(--bg-elevated);
        --popover-foreground: 222 47% 11%;
        --primary: var(--brand-500);
        --primary-foreground: 0 0% 100%;
        --secondary: var(--secondary-500);
        --secondary-foreground: 0 0% 100%;
        --muted: 210 30% 94%; /* More saturated muted */
        --muted-foreground: 215 20% 45%; /* Darker for better contrast */
        --accent: 195 40% 93%; /* Cyan-tinted accent */
        --accent-foreground: 222 47% 11%;
        --destructive: var(--danger-500);
        --destructive-foreground: 0 0% 100%;
        --border: 210 30% 88%; /* More saturated border */
        --input: 210 30% 90%;
        --ring: var(--brand-500);
        --radius: 0.75rem;
        
        /* Motion (durations in ms) */
        --motion-micro: 150ms;
        --motion-fast: 200ms;
        --motion-normal: 250ms;
        --motion-slow: 300ms;
        --motion-overlay: 400ms;
        --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
    }

    .dark {
        /* ==================== Brand Colors (Dark Mode) ==================== */
        /* Brand stays similar but slightly adjusted for dark */
        --brand-glow: 150 100% 42% / 0.22;

        /* Background Layers (Dark) - Rich blue-purple tints for depth */
        --bg-base: 230 35% 8%; /* Deep blue-purple base instead of pure black */
        --bg-surface: 225 30% 11%; /* Rich blue-tinted cards */
        --bg-elevated: 220 28% 14%; /* More saturated for elevation */
        --bg-hover: 218 25% 17%; /* Vibrant hover state */

        /* Shadcn tokens for dark mode */
        --background: var(--bg-base);
        --foreground: 210 50% 96%; /* Slightly warmer white */
        --card: var(--bg-surface);
        --card-foreground: 210 50% 96%;
        --popover: var(--bg-elevated);
        --popover-foreground: 210 50% 96%;
        --primary: var(--brand-500);
        --primary-foreground: 220 50% 6%;
        --secondary: var(--secondary-500);
        --secondary-foreground: 220 50% 6%;
        --muted: 220 30% 20%; /* More saturated muted */
        --muted-foreground: 215 25% 68%; /* Brighter for contrast */
        --accent: 225 35% 18%; /* Blue-tinted accent */
        --accent-foreground: 210 50% 96%;
        --destructive: var(--danger-500);
        --destructive-foreground: 210 50% 96%;
        --border: 220 28% 22%; /* More visible border */
        --input: 220 28% 20%;
        --ring: var(--brand-500);
    }
}

/* ===== Market table funding tints (load after shadcn) ===== */
tr.funding-pos > td {
    /* Softer base tint for green rows */
    background-color: hsl(var(--brand-500) / 0.08);
}
tr.funding-pos:hover > td {
    background-color: hsl(var(--brand-500) / 0.18);
}
tr.funding-neg > td {
    /* Softer base tint for red rows */
    background-color: hsl(var(--danger-500) / 0.08);
}
tr.funding-neg:hover > td {
    background-color: hsl(var(--danger-500) / 0.18);
}

table.vs-market-table {
    border-collapse: separate;
    border-spacing: 0;
}
table.vs-market-table tr {
    -webkit-tap-highlight-color: transparent;
}

/* ===== Price flash (TradingView-style) – text color, not background ===== */
@keyframes vs-text-up {
    0%   { color: hsl(var(--brand-600)); text-shadow: 0 0 0 hsl(var(--brand-500) / 0); }
    15%  { text-shadow: 0 0 8px hsl(var(--brand-500) / 0.35); }
    50%  { color: hsl(var(--brand-600)); }
    100% { color: inherit; text-shadow: 0 0 0 hsl(var(--brand-500) / 0); }
}
@keyframes vs-text-down {
    0%   { color: hsl(var(--danger-600)); text-shadow: 0 0 0 hsl(var(--danger-500) / 0); }
    15%  { text-shadow: 0 0 8px hsl(var(--danger-500) / 0.35); }
    50%  { color: hsl(var(--danger-600)); }
    100% { color: inherit; text-shadow: 0 0 0 hsl(var(--danger-500) / 0); }
}
@keyframes vs-suffix-up {
    0%   { color: hsl(var(--brand-600)); }
    85%  { color: hsl(var(--brand-600)); }
    100% { color: hsl(var(--brand-600)); } /* persist color even after animation completes */
}
@keyframes vs-suffix-down {
    0%   { color: hsl(var(--danger-600)); }
    85%  { color: hsl(var(--danger-600)); }
    100% { color: hsl(var(--danger-600)); } /* persist color even after animation completes */
}

.price-text-flash-up {
    animation: vs-text-up 900ms var(--ease-smooth);
}
.price-text-flash-down {
    animation: vs-text-down 900ms var(--ease-smooth);
}
.price-suffix-up {
    animation: vs-suffix-up 1400ms var(--ease-smooth) forwards; /* keep final color if no re-render occurs */
}
.price-suffix-down {
    animation: vs-suffix-down 1400ms var(--ease-smooth) forwards; /* keep final color if no re-render occurs */
}

/* Static suffix colors (persistent cue after animation ends) */
.price-suffix-up-static {
    color: hsl(var(--brand-600));
}
.price-suffix-down-static {
    color: hsl(var(--danger-600));
}

@layer base {
    * {
        @apply border-border;
    }

    body {
        @apply bg-background text-foreground;
        font-feature-settings: 'cv11', 'ss01';
        font-variant-numeric: tabular-nums;
    }

    /* Typography Utilities */
    .font-mono-tabular {
        font-variant-numeric: tabular-nums;
        font-feature-settings: 'tnum';
    }

    /* Reduced Motion */
    @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }
    }
}

@layer base {
    /* VolSpike signature scrollbars – desktop only (hover + fine pointer) */
    .vs-scroll,
    body {
        /* Firefox + engines that support scrollbar-color */
        scrollbar-width: thin;
        scrollbar-color: hsl(var(--brand-500) / 0.7) transparent;
    }

    @media (hover: hover) and (pointer: fine) {
        .vs-scroll::-webkit-scrollbar,
        body::-webkit-scrollbar {
            width: 7px;
            height: 7px;
        }

        .vs-scroll:hover::-webkit-scrollbar,
        body:hover::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        .vs-scroll::-webkit-scrollbar-track,
        body::-webkit-scrollbar-track {
            background: transparent;
            /* Subtle rail hint that respects card radius */
            border-radius: 999px;
        }

        .vs-scroll::-webkit-scrollbar-thumb,
        body::-webkit-scrollbar-thumb {
            border-radius: 999px;
            border: 2px solid transparent;
            background-clip: padding-box;
            background-image: linear-gradient(
                to bottom,
                hsl(var(--brand-500) / 0.25),
                hsl(var(--secondary-500) / 0.55)
            );
            box-shadow:
                0 0 0 1px hsl(var(--bg-elevated)),
                0 0 16px hsl(var(--brand-glow));
        }

        .vs-scroll::-webkit-scrollbar-thumb:hover,
        body::-webkit-scrollbar-thumb:hover {
            background-image: linear-gradient(
                to bottom,
                hsl(var(--brand-500) / 0.6),
                hsl(var(--secondary-500) / 0.9)
            );
            box-shadow:
                0 0 0 1px hsl(var(--brand-500) / 0.8),
                0 0 22px hsl(var(--brand-glow));
        }

        .vs-scroll::-webkit-scrollbar-thumb:active,
        body::-webkit-scrollbar-thumb:active {
            background-image: linear-gradient(
                to bottom,
                hsl(var(--brand-600)),
                hsl(var(--secondary-600))
            );
        }

        .vs-scroll::-webkit-scrollbar-corner,
        body::-webkit-scrollbar-corner {
            background: transparent;
        }
    }
}

@layer utilities {
    /* Hide scrollbar for Chrome, Safari and Opera */
    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }

    /* Hide scrollbar for IE, Edge and Firefox */
    .scrollbar-hide {
        -ms-overflow-style: none;  /* IE and Edge */
        scrollbar-width: none;  /* Firefox */
    }
}

/* ===== OI Teaser Effect (Free Tier) ===== */
/* Elegant blur/fade effect for locked OI data */
.oi-teaser-value {
    filter: blur(4px);
    opacity: 0.5;
    user-select: none;
    transition: all var(--motion-fast) var(--ease-smooth);
}

/* On hover, slightly increase visibility to hint at data */
.group:hover .oi-teaser-value {
    filter: blur(3px);
    opacity: 0.6;
}

/* Tooltip styling with Pro tier accent */
.oi-teaser-tooltip {
    border-color: hsl(var(--secondary-500) / 0.3) !important;
    background: hsl(var(--bg-elevated)) !important;
}

.oi-teaser-tooltip-gradient {
    background: linear-gradient(
        90deg,
        hsl(var(--secondary-500)),
        hsl(var(--secondary-400)),
        hsl(var(--secondary-500))
    );
    background-size: 200% 100%;
    animation: oi-gradient-shimmer 2s ease-in-out infinite;
}

@keyframes oi-gradient-shimmer {
    0% { background-position: 100% 0; }
    50% { background-position: 0% 0; }
    100% { background-position: 100% 0; }
}
